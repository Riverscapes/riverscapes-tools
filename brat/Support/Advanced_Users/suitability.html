<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>BRAT</title>

      <meta name="viewport" content="width=device-width">
      <link rel="stylesheet" href="/brat/assets/css/style.css">
      <link rel="stylesheet" href="/brat/assets/css/custom.css">

      <link rel="apple-touch-icon" sizes="57x57" href="/brat/assets/images/favicons/apple-icon-57x57.png">
      <link rel="apple-touch-icon" sizes="60x60" href="/brat/assets/images/favicons/apple-icon-60x60.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/brat/assets/images/favicons/apple-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="76x76" href="/brat/assets/images/favicons/apple-icon-76x76.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/brat/assets/images/favicons/apple-icon-114x114.png">
      <link rel="apple-touch-icon" sizes="120x120" href="/brat/assets/images/favicons/apple-icon-120x120.png">
      <link rel="apple-touch-icon" sizes="144x144" href="/brat/assets/images/favicons/apple-icon-144x144.png">
      <link rel="apple-touch-icon" sizes="152x152" href="/brat/assets/images/favicons/apple-icon-152x152.png">
      <link rel="apple-touch-icon" sizes="180x180" href="/brat/assets/images/favicons/apple-icon-180x180.png">
      <link rel="icon" type="image/png" sizes="192x192"  href="/brat/assets/images/favicons/android-icon-192x192.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/brat/assets/images/favicons/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="96x96" href="/brat/assets/images/favicons/favicon-96x96.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/brat/assets/images/favicons/favicon-16x16.png">
      <link rel="manifest" href="/brat/assets/images/favicons/manifest.json">
      <meta name="msapplication-TileColor" content="#ffffff">
      <meta name="msapplication-TileImage" content="/brat/assets/images/favicons/ms-icon-144x144.png">
      <meta name="theme-color" content="#ffffff">
      <link rel="shortcut icon" href="/brat/assets/images/favicons/favicon.ico" />

      <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
  </head>

  <body>

  <header>
    <div id="topbarnav"></div>
    <div id="headcallout" class="text-center callout large">
      
<h4 class="subheader show-for-medium"><a href="/brat/">BRAT</a></h4>   
<h1>Importing Suitability</h1>
    


    </div>
  </header>

  <div id="inner-wrapper">
    <div id="inner" class="row">
      <div id="main" class="large-8 columns large-push-4">
        <section><p>The following instructions describe how to import vegetation suitability values from old <a href="https://github.com/Riverscapes/pyBRAT">pyBRAT runs</a>. Using the script we have provided, this is a quick way to reuse vegetation suitability values that have already been determined.</p>

<h1 id="step-1">Step 1</h1>

<p>Install Jeff Kunce’s dbfpy python package. This allows python to read and comprehend .dbf files. Download and install from <a href="https://pypi.org/project/dbfpy/">this website</a>, or use <code class="language-plaintext highlighter-rouge">pip install dbfpy</code> in the command line. This project was written for dbfpy 2.3.1; compatibility with other versions is likely, but not guaranteed.</p>

<p><img src="/brat/assets/images/suitability/step1.png" alt="step1" /></p>

<h1 id="step-2">Step 2</h1>

<p>Navigate to the <em>find_suitability.py</em> script. This can be found under sqlBRAT/scripts. Open this in the Python IDE of your choice. For this example we’ll be using <a href="https://www.jetbrains.com/pycharm/">PyCharm</a>.</p>

<p><img src="/brat/assets/images/suitability/step2.png" alt="step2" /></p>

<h1 id="step-3">Step 3</h1>

<p>Find your watershed’s region within the <a href="https://docs.google.com/spreadsheets/d/1LcrQwNuY4kYgC2DgZ8AbIN_hERgm3PwtaaZLtYWsFoY/edit?usp=sharing">BRAT Parameters Google Sheet</a>. To do this, navigate to the Watersheds tab. Then, filter the worksheet to the eight digit HUC that you are calibrating. This can be done by clicking the  button to the right of the column heading <strong><em>*WatershedID*</em></strong> in the top, leftmost cell. Type your HUC code and click enter to filter the rows. Look at the <strong><em>*Ecoregion*</em></strong> column to determine your watershed’s region. Populate the script’s first parameter (<code class="language-plaintext highlighter-rouge">region</code>) with the path to that file.</p>

<p><img src="/brat/assets/images/suitability/step3.png" alt="step3" /></p>

<h1 id="step-4">Step 4</h1>

<p>Download the most recent version of the <em>VegetationTypes</em> sheet within the <a href="https://docs.google.com/spreadsheets/d/1LcrQwNuY4kYgC2DgZ8AbIN_hERgm3PwtaaZLtYWsFoY/edit?usp=sharing">BRAT Parameters Google Sheet</a>. To do this, navigate to the VegetationTypes tab. Then, go to File -&gt; Download -&gt;  Comma-separated values (.csv, current sheet). Once the csv downloads, place it somewhere that is easy to navigate to.  Populate the script’s second parameter (<code class="language-plaintext highlighter-rouge">vegetation_types_csv</code>) with the path to that file.</p>

<p><img src="/brat/assets/images/suitability/step4.png" alt="step4" /></p>

<h1 id="step-5">Step 5</h1>

<p>Open up your old pyBRAT project to find the existing vegetation raster’s .dbf file. This is typically found in Inputs -&gt; 01_Vegetation -&gt; 01_ExistingVegetation -&gt;  Ex_Veg_01. Find the Find the file that ends in .dbf. This will typically be something like <em>LANDFIRE_200EVT.vat.dbf</em> or <em>LANDFIRE_140EVT.vat.dbf</em>.   Populate the script’s third parameter (<code class="language-plaintext highlighter-rouge">py_brat_veg_dbf_existing</code>) with the path to that file.</p>

<p><img src="/brat/assets/images/suitability/step5.png" alt="step5" /></p>

<h1 id="step-6">Step 6</h1>

<p>Keep your pyBRAT project open to find the historic vegetation raster’s .dbf file. This is typically found in Inputs -&gt; 01_Vegetation -&gt; 01_HistoricVegetation -&gt;  Hist_Veg_01. Find the Find the file that ends in .dbf. This will typically be something like <em>LANDFIRE_200BPS.vat.dbf</em> or <em>LANDFIRE_140BPS.vat.dbf</em>.   Populate the script’s fourth parameter (<code class="language-plaintext highlighter-rouge">py_brat_veg_dbf_historical</code>) with the path to that file.</p>

<p><img src="/brat/assets/images/suitability/step6.png" alt="step6" /></p>

<h1 id="step-7">Step 7</h1>

<p>Ensure that the script’s fifth parameter (<code class="language-plaintext highlighter-rouge">exceptions</code>) is an empty list (Looks like []), then run the script. The script will print out several outputs into the console, so make sure you have that open. If your outputs are missing certain sections that’s fine, as the script only outputs the sections if they have data you need to address.</p>

<p><img src="/brat/assets/images/suitability/step7.png" alt="step7" /></p>

<h1 id="step-8">Step 8</h1>

<p>The first section of the outputs we’ll look at is titled “Present in Google Sheet, but default suitability should not be zero”. All of the VegetationIDs listed here have default suitability values in the  <a href="https://docs.google.com/spreadsheets/d/1LcrQwNuY4kYgC2DgZ8AbIN_hERgm3PwtaaZLtYWsFoY/edit?usp=sharing">BRAT Parameters Google Sheet</a> that need to be fixed. To do this, open the Google Sheet and navigate to the VegetationTypes tab. Find the vegetation ID that the first line of the script mentions, and replace its suitability with the one listed by the script. Repeat this for all values.</p>

<p><img src="/brat/assets/images/suitability/step8.png" alt="step8" /></p>

<h1 id="step-9">Step 9</h1>

<p>The second section of the outputs we’ll look at is titled “Present in Google Sheet, but suitabilities mismatch”. All of the VegetationIDs listed here have default suitability values in the  <a href="https://docs.google.com/spreadsheets/d/1LcrQwNuY4kYgC2DgZ8AbIN_hERgm3PwtaaZLtYWsFoY/edit?usp=sharing">BRAT Parameters Google Sheet</a> that don;t match the old pyBRAT values. To fix this, open the Google Sheet and navigate to the VegetationOverrides tab. Copy and paste all of the values from the script’s output, into a blank section of the sheet. Ensure that there are no repeats (This can happen if someone has already entered suitability overrides for your region). Also ensure that there are no errors in the sheet, indicated by a red tag on the cell.</p>

<p><img src="/brat/assets/images/suitability/step9.png" alt="step9" /></p>

<h1 id="step-10">Step 10</h1>

<p>The third section of the outputs we’ll look at is titled “Present in Google Sheet, but names mismatch”. This can happen if converting from LANDFIRE 1.4.0 values to LANDFIRE 2.0.0 values creates a mismatch in the name assigned to the same vegetationID. For each entry on this list, think critically to determine if the names truly represent different vegetation types.</p>

<h4 id="if-the-two-names-truly-represent-different-vegetation-types">If the two names truly represent different vegetation types:</h4>

<p>This means there is an issue converting between LANDFIRE 1.4.0 values to LANDFIRE 2.0.0 values. If this happens, please report this, along with the VegetationID, LANDFIRE 1.4.0 name, and LANDFIRE 2.0.0 name, to <a href="https://github.com/Riverscapes/sqlBRAT/issues/63">this GitHub issue.</a></p>

<h4 id="if-the-two-names-seem-to-represent-the-same-vegetation-type-and-the-difference-between-them-is-only-semantic">If the two names seem to represent the same vegetation type, and the difference between them is only semantic:</h4>

<p>This means there is not really an issue converting between LANDFIRE 1.4.0 values to LANDFIRE 2.0.0 values. Add each vegetation ID that falls under this category to the <code class="language-plaintext highlighter-rouge">exceptions</code> parameter at the top of this script. Make sure entries are separated by a comma. After all exceptions have been added, rerun the script.</p>

<p><img src="/brat/assets/images/suitability/step10.png" alt="step10" /></p>

<h1 id="step-11">Step 11</h1>

<p>The fourth and final section of the outputs we’ll look at is titled “Not Present in Google Sheet”. This means that a certain Vegetation ID is not present in Google Sheet, and thus has no default suitability. This can happen when LANDFIRE 1.4.0 values don’t properly convert to 2.0.0. If this happens, please report this, along with the VegetationID, LANDFIRE name, epoch, and suitability value, to <a href="https://github.com/Riverscapes/sqlBRAT/issues/64">this GitHub issue.</a></p>

<p><img src="/brat/assets/images/suitability/step11.png" alt="step11" /></p>

<h1 id="step-12">Step 12</h1>

<p>That’s everything! Now your sqlBRAT run will have appropriate values imported directly from and old pyBRAT project. It is still possible that there are some incorrect suitability values, so make sure that your rerun of sqlBRAT is still critically investigated for and suitability values that seem out of place.</p>
</section>
      </div>
      <div id="sidebar" class="large-4 columns large-pull-8">
          
	
	<div class="title-bar">
		<div class="title-bar-title"><i class="fa fa-file-text"></i> Page Contents</div>		
	</div>
	<div id="toc"></div>
	


<div class="title-bar">
	<div class="title-bar-title"><i class="fa fa-sitemap"></i> Site Contents
		<div id="menuCtls" class="button-group tiny show-for-medium">
				<span id="expand" class="button primary fa fa-plus has-tip top" data-tooltip title="Expand all items" aria-haspopup="true" data-disable-hover="false" ></span>
				<span id="contract" class="button primary fa fa-minus has-tip top" data-tooltip title="Contract all items" aria-haspopup="true" data-disable-hover="false" ></span>
			</div>	
	</div>
</div>
 <div id="sidenav">
			<ul id='HTMLOnlyNav'>							<li><a href='/brat/About/Status/ReportCard_4.3.2.html'>Riverscapes Report Card - BRAT 4.3.2</a></li>							<li><a href='/brat/About/acknowledgements.html'>Acknowledgements</a></li>							<li><a href='/brat/About/'>About</a></li>							<li><a href='/brat/About/references.html'>BRAT References</a></li>							<li><a href='/brat/Support/Advanced_Users/architecture.html'>Architecture</a></li>							<li><a href='/brat/Support/Advanced_Users/calibration.html'>CONUS BRAT Calibration</a></li>							<li><a href='/brat/Support/Advanced_Users/database.html'>Database</a></li>							<li><a href='/brat/Support/Advanced_Users/help.html'>Help</a></li>							<li><a href='/brat/Support/Advanced_Users/inputs.html'>Inputs</a></li>							<li><a href='/brat/Support/Advanced_Users/installation.html'>Installation</a></li>							<li><a href='/brat/Support/Advanced_Users/international.html'>Configuring BRAT outside the US</a></li>							<li><a href='/brat/Support/Advanced_Users/outputs.html'>Outputs</a></li>							<li><a href='/brat/Support/Advanced_Users/regional_regression.html'>Regional Regression Equations</a></li>							<li><a href='/brat/Support/Advanced_Users/running_brat.html'>Running BRAT</a></li>							<li><a href='/brat/Support/Advanced_Users/suitability.html'>Importing Suitability</a></li>							<li><a href='/brat/Support/DownloadingData.html'>Downloading BRAT Data</a></li>							<li><a href='/brat/Support/ModelLogic.html'>BRAT Model Logic</a></li>							<li><a href='/brat/Support/WorkingWithOutputs.html'>Working with BRAT Outputs</a></li>							<li><a href='/brat/Support/brat_table.html'>BRAT Reach Attributes Table</a></li>							<li><a href='/brat/Support/help.html'>Get Help</a></li>							<li><a href='/brat/Support/'>Support</a></li>							<li><a href='/brat/Validation/combined_fis.html'>Combined FIS Validation</a></li>							<li><a href='/brat/Validation/'>Validation</a></li>							<li><a href='/brat/Validation/reach_geometry.html'>Reach Geometry Validation</a></li>							<li><a href='/brat/Validation/slope_validation.html'>Slope</a></li>							<li><a href='/brat/Validation/vegetation_fix.html'>Vegetation FIS Validation</a></li>							<li><a href='/brat/Vision.html'>Vision</a></li>							<li><a href='/brat/assets/images/favicons/manifest.json'></a></li>							<li><a href='/brat/assets/js/nav.js'>Test</a></li>							<li><a href='/brat/'>Home</a></li>		</ul>	
</div>

<!-- Sidebar is where the extended sidepanel stuff like mailchimp forms go -->

<!-- This is where you put your extra sidebar info like a mailchimp form -->
<a href="/">Back to riverscapes tools</a>
        </div>
    </div>
  </div>


    <footer id="footer" class="row">
<div id="rightslogo">
    <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        <img src="/brat/assets/images/cc-watermarks-riverscapes_orig.png" alt="Picture">
    </a>
</div>
</footer>
    

    <script src="/brat/assets/js/jquery.min.js"></script>
    <script src="/brat/assets/js/motion-ui.min.js"></script>
    <script src="/brat/assets/js/foundation.min.js"></script>
    <script src="/brat/assets/js/toc.js"></script>
    <script src="/brat/assets/js/nav.js"></script>
    <script src="/brat/assets/js/app.js"></script>

  </body>

</html>
